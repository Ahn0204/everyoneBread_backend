# 🥖 모두의빵 (Everyone Bread)

> 다중 사용자 환경에서의 역할 분리와  
> 상태 기반 흐름 관리에 초점을 둔  
> 지역 기반 주문·배달 매칭 플랫폼

---

## 📌 프로젝트 개요

- 개발 기간 : 2025.10 ~ 2026.01
- 참여 인원 : 3명
- 담당 : 인증·보안 설계 / 주문·배달 도메인 설계 / 실시간 통신 구조

---

## 🎯 설계 목표

단순 CRUD 중심 서비스가 아닌,  
**다중 역할 환경에서의 권한 분리와 상태 전이 관리가 명확한 구조 설계**를 목표로 개발했습니다.

---

## 🔐 1. 인증 및 권한 구조 설계

### ✔ 역할 기반 인증 구조

- USER / SHOP / RIDER / ADMIN 권한 분리
- CustomAuthenticationProvider 구현
- 로그인 성공/실패 핸들러 분리
- URL 접근 계층화 설계

### ✔ 설계 의도

다중 사용자 환경에서 단일 Security 설정은 유지보수성이 떨어진다고 판단하여  
역할 기반 인증 구조를 분리 설계했습니다.

이를 통해:

- 책임 영역 명확화
- 권한 확장 용이성 확보
- 보안 설정 가독성 향상

---

## 📦 2. 주문·배달 도메인 설계

### ✔ 상태 기반 전이 설계

- 주문 상태 Enum 설계
- 단계별 상태 전이 정의
- 논리 삭제 적용
- ERD 재설계 통한 데이터 정합성 개선

### ✔ 문제 해결 경험

참조 무결성 제약으로 삭제가 불가능한 문제 발생  
→ ERD 전면 재검토  
→ ON DELETE CASCADE + Soft Delete 병행 구조 도입  
→ 데이터 정합성 확보

---

## ⚡ 3. 실시간 통신 구조

- WebSocket (STOMP) 기반 이벤트 처리
- 주문 수락 시 즉시 상태 반영
- Polling 대비 서버 부하 감소

> 이벤트 기반 아키텍처의 장점 체감

---

## 🚀 4. 운영 경험

- AWS EC2 배포
- 빌드·환경 변수 오류 해결
- Git 레포 정리 및 빌드 산출물 제거

개발은 구현이 아닌  
**운영 가능성을 고려하는 과정임을 학습**

---

## ▶ 실행 방법

```bash
git clone https://github.com/Ahn0204/everyoneBread_backend.git
cd everyoneBread_backend
./gradlew build
./gradlew bootRun
```

---

## 💡 회고

- 상태 중심 설계의 중요성 체감
- 다중 역할 시스템에서의 보안 구조 경험
- 성능·보안·운영을 함께 고려하는 개발 방식 학습

---

## 👤 Contributor

안성진  
Backend Developer
