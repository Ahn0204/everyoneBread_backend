<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{shop/common/shop-layout}">

<head>

    <script src="http://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script th:src="@{/js/comm/sweetalert.noah.js}"></script>
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .shop-main-container {
            width: 100%;
            padding: 25px;
            box-sizing: border-box;
        }

        /* 대시보드 영역 */
        .dashboard-box-wrapper {
            display: flex;
            gap: 20px;
            margin-bottom: 35px;
        }

        .dashboard-box {
            flex: 1;
            background: #ffffff;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px 15px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .dash-title {
            font-size: 14px;
            font-weight: 600;
            color: #555;
            margin-bottom: 8px;
        }

        .dash-value {
            font-size: 26px;
            font-weight: 700;
            color: #222;
        }

        /* 그래프 영역 */
        .sales-graph-section {
            margin-top: 20px;
        }

        .graph-placeholder,
        .circle-graph-placeholder {
            width: 100%;
            height: 260px;
            border: 1px solid #ddd;
            background: #fafafa;
            border-radius: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #777;
            font-size: 14px;
            margin-top: 10px;
        }
    </style>
</head>

<body>

<!-- 판매자 레이아웃 shop-layout.html -->
<div layout:fragment="content">

    <div class="shop-main-container">

        <!-- === DASHBOARD 4개 박스 === -->
        <div class="dashboard-box-wrapper">

            <div class="dashboard-box">
                <div class="dash-title">오늘 주문 수</div>
                <div class="dash-value">0</div>
            </div>

            <div class="dashboard-box">
                <div class="dash-title">판매 상품</div>
                <div class="dash-value">0</div>
            </div>

            <div class="dashboard-box">
                <div class="dash-title">품절 상품</div>
                <div class="dash-value">0</div>
            </div>

            <div class="dashboard-box">
                <div class="dash-title">평균 별점</div>
                <div class="dash-value">0.0</div>
            </div>

        </div>

        <!-- === 매출 통계 섹션 === -->
        <div class="sales-graph-section">
            <h3>매출 통계</h3>
            <div class="graph-placeholder">
                막대, 곡선 그래프
            </div>
        </div>

        <!-- === 종합 통계(원 그래프 등) === -->
        <div class="total-sales-section">
            <div class="circle-graph-placeholder">
                총 매출 / 오늘 매출 / 자주 팔린 빵 비율 / 원 그래프
            </div>
        </div>
    </div>
</div>
<!-- ==============================
     SweetAlert 로그인 성공/실패 JS
     ============================== -->
<script>
    // URL 파라미터 읽기
    const params = new URLSearchParams(window.location.search);

    /* ==========================
       1) 로그인 성공 처리
       ========================== */
    if (params.get("success") === "login-ok") {

        showSuccessAlert("판매자 계정으로 로그인되었습니다.").then(() => {
            // URL 파라미터 제거
            const cleanUrl = window.location.origin + window.location.pathname;
            window.history.replaceState({}, document.title, cleanUrl);
        });
    }

    /* ==========================
       2) 로그인 실패 처리
       ========================== */
    if (params.get("error")) {

        // URL에서 인코딩된 메시지 복원
        const errorMsg = decodeURIComponent(params.get("error"));

        showErrorAlert("아이디 또는 비밀번호가 올바르지 않습니다.").then(() => {
            // 실패 파라미터 제거 (중복 방지)
            const cleanUrl = window.location.origin + window.location.pathname;
            window.history.replaceState({}, document.title, cleanUrl);
        });
    }
</script>
</body>
</html>