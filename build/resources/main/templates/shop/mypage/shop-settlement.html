<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{shop/mypage/shop-mypage-layout}">

<head>
    <meta charset="UTF-8"/>
    <!-- CSRF 토큰 설정 -->
    <meta name="_csrf" th:content="${_csrf.token}">
    <meta name="_csrf_header" th:content="${_csrf.headerName}">

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <!-- SweetAlert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script th:src="@{/js/comm/sweetalert.noah.js}"></script>
    <!-- 정산 관리 CSS -->
    <link rel="stylesheet" th:href="@{/css/shop/mypage/settlement.css}">
    <title>정산 관리</title>
</head>

<body>
<section layout:fragment="mypage-content">

    <div class="page-title">정산 관리</div>

    <!-- ================= 정산 계좌 정보 ================= -->
    <div class="section-box">
        <div class="section-title">정산 계좌 정보</div>

        <div class="info-row">
            <label>예금주명</label>
            <input id="accountName" th:value="${shop.accountName}" readonly>
            <button type="button"
            onclick="toggleEdit(this, 'accountName', 'accountName')">변경</button>
        </div>

        <div class="info-row">
            <label>은행명</label>
            <input id="bankName" th:value="${shop.bankName}" readonly>
            <button type="button" onclick="toggleEdit(this, 'bankName', 'bankName')">변경</button>
        </div>
        
        <div class="info-row">
            <label>계좌번호</label>
            <input id="accountNo" th:value="${shop.accountNo}" readonly>
            <button type="button" onclick="toggleEdit(this, 'accountNo', 'accountNo')">변경</button>
        </div>
    </div>
            
    <!-- ================= 정산 요약 ================= -->
    <div class="section-box">
        <div class="section-title">정산 요약</div>

        <div class="summary-row">
            <span>누적 매출</span>
            <strong th:text="${totalSales} + '원'">0원</strong>
        </div>
        
        <div class="summary-row">
            <span>정산 완료</span>
            <strong th:text="${settledAmount} + '원'">0원</strong>
        </div>
        
        <div class="summary-row">
            <span>정산 예정</span>
            <strong th:text="${expectedAmount} + '원'">0원</strong>
        </div>
    </div>
    
    <!-- ================= 정산 내역 ================= -->
    <div class="section-box">
        <div class="section-title">정산 내역</div>
        
        <table>
            <thead>
                <tr>
                    <th>정산일</th>
                    <th>정산 기간</th>
                    <th>금액</th>
                    <th>상태</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="s : ${settlementList}">
                    <td th:text="${s.settlementDate}">2026-01-08</td>
                    <td th:text="${s.period}">1/1 ~ 1/7</td>
                    <td th:text="${s.amount} + '원'">320,000원</td>
                    <td th:text="${s.status}">완료</td>
            </tr>
            
            <tr th:if="${#lists.isEmpty(settlementList)}">
                <td colspan="4">정산 내역이 없습니다.</td>
            </tr>
            </tbody>
        </table>
    </div>
    <script th:src="@{/js/shop/mypage/settlement.js}"></script>
</section>
</body>
</html>