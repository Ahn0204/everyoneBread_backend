<!--
******************************************
*  Created On : 2025. 11. 20.
*  File : admin-list.html
*******************************************
 -->
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{admin/comm/admin-layout}">
    <head>
        <th:block layout:fragment="head">
            <link rel="stylesheet" th:href="@{/css/admin/comm/list-comm.css}" />
            <style>
                /*항목 너비 설정하는 레이아웃css*/
.div-cols {
    /*항목을 담는 div에 지정*/
    display: flex;
    flex-direction: row;
    width: 100%;
    padding: 20px 10px 10px 20px;
}
.div-col-1 {
    flex: 0.7;
} /* 번호 */
.div-col-2 {
    flex: 1;
} /* 상태 */
.div-col-3 {
    flex: 1.2;
} /* 아이디 */
.div-col-4 {
    flex: 1;
} /* 이름 */
.div-col-5 {
    flex: 1.5;
} /* 신청일시 */
.div-col-6 {
    flex: 1.5;
} /* 승인일시 */
/* .div-col-7 {
    flex: 1.5;
} 상점명 */
            </style>
        </th:block>
    </head>

    <!--본문-->
    <body>
        <div layout:fragment="content">
            <div class="listAndList-header m-2">
                <div class="list-header"><h3>관리자 계정 추가</h3></div>
                <div class="add-admin">
                    <form th:action="@{/admin/user/insertAdmin}" method="post" name="insertAdminForm" th:object="${insertAdminForm}">
                        <!--유효성 검증에 에러 발생 시 에러 출력 -->
                        <div th:replace="~{comm/formErrors :: formErrorsInsertAdmin}"></div>

                        <label for="adminName">이름</label>
                        &nbsp;
                        <input type="text" th:field="*{adminName}" class="me-1" placeholder="한글 2~20자" />

                        <label for="adminId">아이디</label>
                        &nbsp;
                        <input type="text" th:field="*{adminId}" class="me-1" placeholder="영문+숫자 5~20자" />

                        <label for="adminPassword">비밀번호</label>
                        &nbsp;
                        <input type="password" th:field="*{adminPassword}" class="me-1" placeholder="영문+숫자+특문 8~20자" />

                        <!--type=button인 input은 클릭 시 자동으로 submit되지 않음!!-->
                        <input type="button" value="계정 추가" class="btn insertAdmin btn-secondary" />
                        <th:block th:if="${isSucceeded} != null">
                            <script th:if="${isSucceeded}">
                                showToast('추가 완료', 'success');
                            </script>
                            <script th:unless="${isSucceeded}">
                                showToast('다시 시도해주세요.', 'error');
                            </script>
                        </th:block>
                    </form>
                </div>
                <div class="admin-list" style="max-width: 1000px; min-width: 800px"><div class="div-cols border-bottom border-3 border-dark fw-b text-center">
                        <div class="div-col-1 fw-bold">번호</div>
                        <div class="div-col-2 fw-bold">상태</div>
                        <div class="div-col-3 fw-bold">아이디</div>
                        <div class="div-col-4 fw-bold">이름</div>
                        <div class="div-col-5 fw-bold">&nbsp;신청일시&nbsp;</div>
                        <div class="div-col-6 fw-bold">&nbsp;승인일시&nbsp;</div>
                        <div class="div-col-7"></div>
                    </div>
                    <!--라이더 내역이 없을 때-->
                    <div th:if="${noRider}">
                        <div class="p-2 flex-fill" th:text="${noRider}"></div>
                    </div>
                    <!--라이더 내역이 있을 때-->
                    <div th:unless="${noRider}">
                        <!--아코디언 속성이 적용된 리스트-->
                        <div class="accordion" id="riderApproval-List">
                            <!--미검토 PENDING, UNDER_REVIEW 리스트-->
                            <!--항목 1개 : 목록에서 보이는 헤더 + 클릭 시 나타나는 바디 구성-->
                            <div class="accordion-item" th:each="rider, loop : ${pendingList}">
                                <!--내역마다 반복되는 출력부 fragment, 글번호 시작값 전달-->
                                <div th:replace="~{/admin/user/riderApproval-common(start=${pendingStart})}"></div>
                            </div>
                            <!--보완요청 REVISION_REQUIRED 리스트-->
                            <div class="accordion-item" th:each="rider,loop : ${rejectedList}">
                                <div th:replace="~{/admin/user/riderApproval-common(start=${rejectedStart})}"></div>
                            </div>
                            <!--승인완료 APPROVED 리스트-->
                            <div class="accordion-item" th:each="rider,loop : ${approvedList}">
                                <div th:replace="~{/admin/user/riderApproval-common(start=${approvedStart})}"></div>
                            </div>
                        </div>
                    </div>
            </div>
        </div>

        <script layout:fragment="script">
            $('.insertAdmin').on('click', function () {
                showConfirmAlert(
                    '관리자 계정을\n추가하시겠습니까?', // 표시할 메시지
                    () => {
                        //예
                        //documnet.insertAdminForm.submit();
                        $('form[name="insertAdminForm"]').submit(); //폼 제출
                    },
                    () => {
                        //아니오
                        showToast('취소되었습니다.', 'warning');
                    }
                );
            });
        </script>
    </body>
</html>
