<!--
******************************************
*  Created On : 2025. 11. 20.
*  File : admin-list.html
*******************************************
 -->
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8" />
        <script src="https://code.jquery.com/jquery-latest.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script th:src="@{/js/comm/sweetalert.noah.js}"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous" />
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
        <title>모두의 빵</title>
    </head>

    <!--본문-->
    <body>
        <div class="listAndList-header m-2">
            <div class="list-header"><h3>관리자 계정 추가</h3></div>
            <div class="add-admin">
                <form th:action="@{/admin/user/insertAdmin}" method="post" name="insertAdminForm" th:object="${insertAdminForm}">
                    <!--유효성 검증에 에러 발생 시 에러 출력 -->
                    <div th:replace="~{comm/formErrors :: formErrorsInsertAdmin}"></div>

                    <label for="adminName">이름</label>
                    &nbsp;
                    <input type="text" th:field="*{adminName}" class="me-1" placeholder="한글 2~20자" />

                    <label for="adminId">아이디</label>
                    &nbsp;
                    <input type="text" th:field="*{adminId}" class="me-1" placeholder="영문+숫자 5~20자" />

                    <label for="adminPassword">비밀번호</label>
                    &nbsp;
                    <input type="password" th:field="*{adminPassword}" class="me-1" placeholder="영문+숫자+특문 8~20자" />

                    <!--type=button인 input은 클릭 시 자동으로 submit되지 않음!!-->
                    <input type="button" value="계정 추가" class="btn insertAdmin btn-secondary" />
                    <th:block th:if="${isSucceeded} != null">
                        <script th:if="${isSucceeded}">
                            showToast('추가 완료', 'success');
                        </script>
                        <script th:unless="${isSucceeded}">
                            showToast('다시 시도해주세요.', 'error');
                        </script>
                    </th:block>
                </form>
            </div>
        </div>

        <script layout:fragment="script">
            $('.insertAdmin').on('click', function () {
                showConfirmAlert(
                    '관리자 계정을\n추가하시겠습니까?', // 표시할 메시지
                    () => {
                        //예
                        $('form[name="insertAdminForm"]').submit(); //폼 제출
                    },
                    () => {
                        //아니오
                        showToast('취소되었습니다.', 'warning');
                    }
                );
            });
        </script>
    </body>
</html>
