<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{member/mypage/mypage-layout}">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />
    <!-- JQuery CDN -->
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <!-- SweetAlert2 CDN -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script th:src="@{/js/comm/sweetalert.noah.js}"></script>

    <link rel="stylesheet" th:href="@{/css/member/mypage/info.css}">
    <title>개인정보 관리</title>
</head>
<body>
    <section layout:fragment="mypage-content">

        <div class="info-title">개인정보 관리</div>

        <!-- 탭 영역 -->
        <div class="tab-area">
            <button class="tab-btn active" onclick="showTab('info')">정보 변경</button>
            <button class="tab-btn" onclick="showTab('password')">비밀번호 변경</button>
        </div>

        <!-- ================= 정보 변경 탭 ================= -->
        <div class="info-box tab-content" id="info-tab">

            <div class="form-row">
                <label>아이디</label>
                <input type="text" th:value="${#authentication.principal.member.memberId}" readonly>
            </div>

            <div class="form-row">
                <label>이름</label>
                <input type="text" th:value="${#authentication.principal.member.memberName}" readonly>
            </div>

            <div class="form-row">
                <label>휴대폰 번호</label>
                <input type="text" id="phone" th:value="${#authentication.principal.member.memberPhone}">
                <button onclick="updateInfo('phone')">변경</button>
            </div>

            <div class="form-row">
                <label>이메일</label>
                <input type="text" id="email" th:value="${#authentication.principal.member.memberEmail}">
                <button onclick="updateInfo('email')">변경</button>
            </div>

            <div class="btn-area">
                <button class="tab-btn" onclick="alert('저장되었습니다.')">확인</button>
            </div>

            <div class="withdraw-area">
                <button class="withdraw-btn" onclick="openWithdrawModal()">회원탈퇴</button>
            </div>

        </div>

        <!-- ================= 비밀번호 변경 탭 ================= -->
        <div class="info-box tab-content" id="password-tab" style="display:none;">

            <div class="form-row">
                <label>현재 비밀번호</label>
                <input type="password" id="currentPw">
            </div>

            <div class="form-row">
                <label>새 비밀번호</label>
                <input type="password" id="newPw">
            </div>

            <div class="form-row">
                <label>비밀번호 확인</label>
                <input type="password" id="confirmPw">
                <button onclick="changePassword()">변경</button>
            </div>

        </div>

        <script th:src="@{/js/member/mypage/info.js}"></script>
    </section>
</body>
</html>